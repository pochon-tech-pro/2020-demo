(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{257:function(t,e,n){"use strict";n.r(e);n(68),n(134),n(24),n(19),n(14);var r,o=n(18),l=(n(93),n(247)),c=(n(135),n(67)),f=n.n(c),h=n(252),d=n(253),v=n(254),y=n(255),m=n(256),w=[{id:1,lat:35.6935374,lng:139.6786501,name:"アパホテル新宿歌舞伎町タワー",brand:"APA"},{id:2,lat:35.6898334,lng:139.6813204,name:"アパホテル＆リゾート西新宿五丁目駅タワー",brand:"APA"},{id:3,lat:35.6562223,lng:139.6928183,name:"アパホテル渋谷道玄坂上",brand:"APA"},{id:4,lat:35.6828996,lng:139.7377926,name:"アパホテル半蔵門 平河町",brand:"APA"},{id:5,lat:35.6887571,lng:139.7066217,name:"アパホテル新宿御苑前",brand:"APA"},{id:6,lat:35.6888622,lng:139.6913008,name:"東横横INN新宿歌舞伎町",brand:"INN"},{id:7,lat:35.689468,lng:139.7089635,name:"東横INN新宿御苑前駅3番出口",brand:"INN"}],P={APA:"red",INN:"yellow"},x=function(){return(x=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},_=function(t,e,n,r){return new(n||(n=Promise))((function(o,l){function c(t){try{h(r.next(t))}catch(t){l(t)}}function f(t){try{h(r.throw(t))}catch(t){l(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,f)}h((r=r.apply(t,e||[])).next())}))},k=function(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=body.call(t,o)}catch(t){l=[6,t],n=0}finally{e=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},O=function(t){return _(void 0,void 0,void 0,(function(){var e,data;return k(this,(function(n){switch(n.label){case 0:return[4,_(void 0,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return[4,(e=w,_(void 0,void 0,void 0,(function(){return k(this,(function(t){return[2,e.map((function(t){return x(x({},t),{iconColor:P[t.brand]})}))]}))})))];case 1:return[2,t.sent()]}var e}))}))];case 1:return e=n.sent(),"https://msearch.gsi.go.jp/address-search/AddressSearch",[4,fetch("https://msearch.gsi.go.jp/address-search/AddressSearch?q="+t)];case 2:return[4,n.sent().json()];case 3:return data=n.sent(),console.log(e),[2,j({lat:data[0].geometry.coordinates[1],lng:data[0].geometry.coordinates[0]},e)]}}))}))},j=function(t,e){var n=t.lat,r=t.lng;return e.map((function(t){var e={lat:n,lng:r},o={lat:t.lat,lng:t.lng};return x(x({},t),{dis:M(e,o)})})).sort((function(a,b){return a.dis<b.dis?-1:1}))},M=function(t,e){var a=6378137,n=(Math.pow(a,2)-Math.pow(6356752.314245,2))/Math.pow(a,2),r=t.lng*(Math.PI/180),o=t.lat*(Math.PI/180),l=e.lng*(Math.PI/180),c=e.lat*(Math.PI/180),f=o-c,h=r-l,d=(o+c)/2,v=Math.sqrt(1-n*Math.pow(Math.sin(d),2)),y=a/v,m=a*(1-n)/Math.pow(v,3);return Math.sqrt(Math.pow(f*m,2)+Math.pow(h*y*Math.cos(d),2))},A=(r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)},function(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),C=function(){return(C=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},I=function(t,e,n,desc){var r,l=arguments.length,c=l<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(l<3?r(c):l>3?r(e,n,c):r(e,n))||c);return l>3&&c&&Object.defineProperty(e,n,c),c},L=function(t,e,n,r){return new(n||(n=Promise))((function(o,l){function c(t){try{h(r.next(t))}catch(t){l(t)}}function f(t){try{h(r.throw(t))}catch(t){l(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,f)}h((r=r.apply(t,e||[])).next())}))},S=function(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=body.call(t,o)}catch(t){l=[6,t],n=0}finally{e=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},N=[{id:1,lat:35.6939414,lng:139.7011972,name:"新宿区役所"}],R=["red","yellow","grey"].map((function(t){var e=new f.a.Icon.Default;return e.options.iconUrl="./images/map-icons/marker-icon-2x-"+t+".png",e.options.iconRetinaUrl="./images/map-icons/marker-icon-2x-"+t+".png",[t,e]})).reduce((function(t,e){var n,r=e[0],o=e[1];return C(C({},t),((n={})[r]=o,n))}),{}),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tileLayerUrl="",e.mapZoom=0,e.mapStyle="",e.mapCenterLatlng=[],e.maps=[],e.prefItems=[{text:"都道府県",value:""},{text:"東京都",value:"東京都"}],e.cityItems=[{text:"市区町村",value:""},{text:"新宿区",value:"新宿区"},{text:"渋谷区",value:"渋谷区"}],e.selectedPref="",e.selectedCity="",e.loading=!1,e}return A(e,t),e.prototype.created=function(){return L(this,void 0,void 0,(function(){return S(this,(function(t){return this.tileLayerUrl="http://{s}.tile.osm.org/{z}/{x}/{y}.png",this.mapZoom=16,this.mapStyle="width:auto; height:400px;",this.mapCenterLatlng=[N[0].lat,N[0].lng],[2]}))}))},e.prototype.mounted=function(){return L(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:return t=this,[4,_(void 0,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return[4,O("東京都新宿区")];case 1:return[2,t.sent()]}}))}))];case 1:return t.maps=e.sent(),this.mapCenterLatlng=[this.maps[0].lat,this.maps[0].lng],[2]}}))}))},e.prototype.search=function(){return L(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:return this.selectedPref?this.selectedCity?(this.loading=!0,t=this,[4,O(this.selectedPref+this.selectedCity)]):(alert("市区町村を選択してください"),[2,!1]):(alert("都道府県を選択してください"),[2,!1]);case 1:return t.maps=e.sent(),this.mapCenterLatlng=[this.maps[0].lat,this.maps[0].lng],this.loading=!1,[2]}}))}))},Object.defineProperty(e.prototype,"markers",{get:function(){return this.maps.map((function(t){return{id:t.id,latlng:[t.lat,t.lng],name:t.name,icon:R[t.iconColor]}}))},enumerable:!0,configurable:!0}),I([Object(l.b)()],e.prototype,"map",void 0),e=I([Object(l.a)({components:{LMap:h.a,LTileLayer:d.a,LCircle:v.a,LMarker:y.a,LPopup:m.a}})],e)}(l.c),E=n(33),component=Object(E.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"center"},[t._v("地図検索")])]),t._v(" "),n("v-ons-card",[n("v-ons-select",{staticStyle:{width:"30%"},model:{value:t.selectedPref,callback:function(e){t.selectedPref=e},expression:"selectedPref"}},t._l(t.prefItems,(function(e,r){return n("option",{key:r,domProps:{value:e.value}},[t._v("\n        "+t._s(e.text)+"\n      ")])})),0),t._v(" "),n("v-ons-select",{staticStyle:{width:"30%","padding-left":"30px"},model:{value:t.selectedCity,callback:function(e){t.selectedCity=e},expression:"selectedCity"}},t._l(t.cityItems,(function(e,r){return n("option",{key:r,domProps:{value:e.value}},[t._v("\n        "+t._s(e.text)+"\n      ")])})),0),t._v(" "),n("v-ons-button",{staticStyle:{float:"right",padding:"initial"},attrs:{modifier:"outline"},on:{click:function(e){return t.search()}}},[t._v("Search !!")])],1),t._v(" "),n("v-ons-card",[n("l-map",{ref:"map",style:t.mapStyle,attrs:{zoom:t.mapZoom,center:t.mapCenterLatlng}},[n("l-tile-layer",{attrs:{url:t.tileLayerUrl}}),t._v(" "),t._l(t.markers,(function(marker,t){return n("l-marker",{key:t,attrs:{"lat-lng":marker.latlng,icon:marker.icon}},[n("l-popup",{attrs:{content:marker.name}})],1)}))],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);